# Unityæ ¸å¿ƒåŠŸèƒ½é…ç½®æŒ‡å—

> æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•åœ¨Unityä¸­é…ç½®4ä¸ªæ ¸å¿ƒæˆ˜æ–—åŠŸèƒ½

---

## ğŸ“‹ å‰ç½®å‡†å¤‡

### 1. æ£€æŸ¥ç°æœ‰åœºæ™¯
- æ‰“å¼€ä½ çš„æ¸¸æˆåœºæ™¯ï¼ˆå¦‚ `Assets/Scenes/Level_1.unity`ï¼‰
- ç¡®è®¤åœºæ™¯ä¸­å·²æœ‰ï¼š
  - [ ] ç©å®¶è§’è‰²ï¼ˆå¸¦ `PlayerCharacterCtrl`ï¼‰
  - [ ] æ€ªç‰©ç”Ÿæˆç‚¹ï¼ˆSpawnRootï¼‰
  - [ ] è‡³å°‘ä¸€ä¸ªé˜²å¾¡å¡”ä½ç½®

### 2. åˆ›å»ºå¿…è¦çš„Layer
```
Window > Layers > Add Layer

Layer 8: Enemy        (æ€ªç‰©)
Layer 9: Tower        (é˜²å¾¡å¡”)
Layer 10: Kitchen     (å¨æˆ¿åŒºåŸŸ)
```

---

## ğŸ¯ æ­¥éª¤1ï¼šè®¾ç½®å…³å¡ç”Ÿå‘½å€¼ç³»ç»Ÿ

### 1.1 åˆ›å»ºç®¡ç†å™¨å¯¹è±¡

```
Hierarchyå³é”® > Create Empty
åç§°: _LevelManagers

åœ¨_LevelManagersä¸‹:
  å³é”® > Create Empty
  åç§°: LevelHealthSystem
```

### 1.2 æ·»åŠ è„šæœ¬ç»„ä»¶

```
é€‰ä¸­ LevelHealthSystem
Inspector > Add Component
æœç´¢: "LevelHealthSystem"
æ·»åŠ è„šæœ¬
```

### 1.3 é…ç½®å‚æ•°

```
LevelHealthSystem ç»„ä»¶:
â”œâ”€â”€ Max Health: 10          (åˆå§‹ç”Ÿå‘½å€¼)
```

**æµ‹è¯•**:
- è¿è¡Œæ¸¸æˆ
- åœ¨Consoleè¾“å…¥: `LevelHealthSystem.Instance.TakeDamage(1)`
- è§‚å¯Ÿç”Ÿå‘½å€¼æ˜¯å¦å‡å°‘

---

## ğŸšª æ­¥éª¤2ï¼šè®¾ç½®å¨æˆ¿åŒºåŸŸè§¦å‘å™¨

### 2.1 åˆ›å»ºå¨æˆ¿åŒºåŸŸ

```
Hierarchyå³é”® > Create Empty
åç§°: KitchenZone
Position: æ”¾åœ¨ç©å®¶åŸºåœ°çš„åæ–¹ä½ç½®
```

### 2.2 æ·»åŠ è§¦å‘å™¨

```
é€‰ä¸­ KitchenZone
Inspector > Add Component > Box Collider 2D

Box Collider 2D è®¾ç½®:
â”œâ”€â”€ Is Trigger: âœ“ (å‹¾é€‰ï¼)
â”œâ”€â”€ Size: æ ¹æ®ä½ çš„å¨æˆ¿åŒºåŸŸè°ƒæ•´
â”‚   ä¾‹å¦‚: X=10, Y=10
â””â”€â”€ Offset: è°ƒæ•´åˆ°åˆé€‚ä½ç½®
```

### 2.3 æ·»åŠ è„šæœ¬

```
é€‰ä¸­ KitchenZone
Inspector > Add Component
æœç´¢: "KitchenZoneTrigger"
æ·»åŠ è„šæœ¬

KitchenZoneTrigger ç»„ä»¶:
â”œâ”€â”€ Show Debug Gizmos: âœ“ (å‹¾é€‰ï¼Œæ–¹ä¾¿è°ƒè¯•)
â””â”€â”€ Gizmo Color: çº¢è‰²åŠé€æ˜
```

### 2.4 å¯è§†åŒ–è°ƒè¯•

```
åœ¨Sceneè§†å›¾ä¸­ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°çº¢è‰²åŠé€æ˜åŒºåŸŸ
å¦‚æœçœ‹ä¸åˆ°ï¼Œç‚¹å‡»Sceneè§†å›¾å³ä¸Šè§’çš„ Gizmos æŒ‰é’®ç¡®ä¿å¼€å¯
```

**æµ‹è¯•**:
- è¿è¡Œæ¸¸æˆ
- æ‰‹åŠ¨æ‹–åŠ¨ä¸€ä¸ªæ€ªç‰©åˆ°å¨æˆ¿åŒºåŸŸ
- è§‚å¯Ÿï¼š
  - [ ] æ€ªç‰©æ˜¯å¦æ­»äº¡
  - [ ] å…³å¡ç”Ÿå‘½å€¼æ˜¯å¦å‡å°‘
  - [ ] æ€ªç‰©æ˜¯å¦æ²¡æœ‰æ‰è½é£Ÿæ

---

## ğŸ° æ­¥éª¤3ï¼šé…ç½®é˜²å¾¡å¡”è‡ªåŠ¨æ”»å‡»

### 3.1 è®¾ç½®é˜²å¾¡å¡”Layer

```
é€‰ä¸­ä½ çš„é˜²å¾¡å¡”Prefabï¼ˆæˆ–åœºæ™¯ä¸­çš„é˜²å¾¡å¡”ï¼‰
Inspector > Layer > Tower (é€‰æ‹©Towerå±‚)
```

### 3.2 æ£€æŸ¥ç°æœ‰ç»„ä»¶

ä½ çš„é˜²å¾¡å¡”åº”è¯¥å·²ç»æœ‰ï¼š
```
âœ“ CharacterCtrlBase
âœ“ PlayerCharacterCtrl
âœ“ TowerEnergySystem
âœ“ TowerController
âœ“ InteractableTower
```

### 3.3 é…ç½®TowerControllerçš„æ”»å‡»å‚æ•°

```
é€‰ä¸­é˜²å¾¡å¡”
æ‰¾åˆ° TowerController ç»„ä»¶

ã€æ”»å‡»é…ç½®ã€‘
â”œâ”€â”€ Attack Range: 5              (æ”»å‡»èŒƒå›´ï¼Œå¯è°ƒæ•´)
â”œâ”€â”€ Attack Interval: 1           (æ”»å‡»é—´éš”ï¼Œ1ç§’1æ¬¡)
â”œâ”€â”€ Base Attack: 10              (åŸºç¡€æ”»å‡»åŠ›)
â”œâ”€â”€ Skill Rate: 1.0              (æŠ€èƒ½å€ç‡)
â”œâ”€â”€ Attack Type: Physical        (ç‰©ç†æ”»å‡»)
â””â”€â”€ Enemy Layer: Enemy          (é€‰æ‹©Enemyå±‚ï¼é‡è¦ï¼)
```

### 3.4 è®¾ç½®æ€ªç‰©Layer

```
é€‰ä¸­ä½ çš„æ€ªç‰©Prefabï¼ˆå¦‚ MeatMonsterï¼‰
Inspector > Layer > Enemy (é€‰æ‹©Enemyå±‚)

å¯¹æ‰€æœ‰æ€ªç‰©Prefabéƒ½è¿™æ ·è®¾ç½®ï¼
```

### 3.5 æŸ¥çœ‹æ”»å‡»èŒƒå›´

```
åœ¨Sceneè§†å›¾ä¸­:
- é€‰ä¸­é˜²å¾¡å¡”
- ä½ åº”è¯¥çœ‹åˆ°çº¢è‰²åœ†åœˆï¼ˆæ”»å‡»èŒƒå›´ï¼‰
- å½“æ€ªç‰©è¿›å…¥èŒƒå›´æ—¶ï¼Œä¼šçœ‹åˆ°é»„è‰²è¿çº¿
```

**æµ‹è¯•**:
- è¿è¡Œæ¸¸æˆ
- è®©æ€ªç‰©èµ°åˆ°é˜²å¾¡å¡”æ”»å‡»èŒƒå›´å†…
- è§‚å¯Ÿï¼š
  - [ ] é˜²å¾¡å¡”æ˜¯å¦è‡ªåŠ¨æ”»å‡»æ€ªç‰©
  - [ ] æ€ªç‰©è¡€é‡æ˜¯å¦å‡å°‘
  - [ ] Consoleæ˜¯å¦è¾“å‡ºæ”»å‡»æ—¥å¿—
  - [ ] å®•æœºçŠ¶æ€æ˜¯å¦åœæ­¢æ”»å‡»

---

## ğŸ‘¹ æ­¥éª¤4ï¼šé…ç½®æ€ªç‰©æ”»å‡»é˜²å¾¡å¡”

### 4.1 ä¿®æ”¹æ€ªç‰©Prefab

```
æ‰“å¼€æ€ªç‰©Prefabï¼ˆå¦‚ Assets/Resources/Prefabs/Monsters/MeatMonsterï¼‰
Inspector > Add Component
æœç´¢: "MonsterCombatBehavior"
æ·»åŠ è„šæœ¬
```

### 4.2 é…ç½®æ”»å‡»å‚æ•°

```
MonsterCombatBehavior ç»„ä»¶:
ã€æ”»å‡»é…ç½®ã€‘
â”œâ”€â”€ Attack Range: 1.5            (æ”»å‡»èŒƒå›´)
â”œâ”€â”€ Attack Interval: 2           (æ”»å‡»é—´éš”ï¼Œ2ç§’1æ¬¡)
â”œâ”€â”€ Energy Damage: 10            (èƒ½é‡ä¼¤å®³)
â””â”€â”€ Tower Layer: Tower          (é€‰æ‹©Towerå±‚ï¼é‡è¦ï¼)

ã€è°ƒè¯•ã€‘
â””â”€â”€ Show Debug Gizmos: âœ“ (å‹¾é€‰)
```

### 4.3 ä¿å­˜Prefab

```
ç‚¹å‡»Prefabä¸Šæ–¹çš„ "Apply" æŒ‰é’®
ç¡®ä¿æ‰€æœ‰è¯¥ç±»å‹çš„æ€ªç‰©éƒ½åº”ç”¨äº†æ”¹åŠ¨
```

### 4.4 å¯¹æ‰€æœ‰æ€ªç‰©é‡å¤æ“ä½œ

```
å¯¹æ¯ä¸ªæ€ªç‰©Prefabéƒ½æ·»åŠ  MonsterCombatBehaviorï¼š
- MeatMonster (èŒ„èŒ„ç« )
- VegetableMonster (è‡è‡é±¼)
- PotatoMonster (è±†è±†ç‰›)
- OnionMonster (è‘±è‘±é¸¡)
ç­‰ç­‰...
```

**æµ‹è¯•**:
- è¿è¡Œæ¸¸æˆ
- è®©æ€ªç‰©èµ°åˆ°é˜²å¾¡å¡”æ—è¾¹
- è§‚å¯Ÿï¼š
  - [ ] æ€ªç‰©æ˜¯å¦æ”»å‡»é˜²å¾¡å¡”
  - [ ] é˜²å¾¡å¡”èƒ½é‡æ˜¯å¦å‡å°‘
  - [ ] èƒ½é‡ä¸º0æ—¶æ˜¯å¦å®•æœº
  - [ ] å®•æœºåæ˜¯å¦å¤±å»ç¢°æ’ä½“ç§¯

---

## ğŸ–¥ï¸ æ­¥éª¤5ï¼šåˆ›å»ºå…³å¡ç”Ÿå‘½å€¼UI

### 5.1 æ‰“å¼€UI Canvas

```
Hierarchy > æ‰¾åˆ°ä½ çš„ GameHUD Canvas
å¦‚æœæ²¡æœ‰ï¼Œåˆ›å»ºä¸€ä¸ª:
  å³é”® > UI > Canvas
  åç§°: GameHUD
```

### 5.2 åˆ›å»ºç”Ÿå‘½å€¼UIé¢æ¿

```
åœ¨ GameHUD ä¸‹:
å³é”® > UI > Panel
åç§°: LevelHealthPanel

è®¾ç½®ä½ç½®ï¼ˆAnchorï¼‰:
- ç‚¹å‡»Rect Transformå·¦ä¸Šè§’çš„æ–¹æ¡†
- é€‰æ‹© "top-left" (å·¦ä¸Šè§’)
- Position: X=150, Y=-50
- Width: 250, Height: 60
```

### 5.3 æ·»åŠ UIå…ƒç´ 

#### A. èƒŒæ™¯å›¾ç‰‡
```
LevelHealthPanel å·²ç»æœ‰ Image ç»„ä»¶
å¯ä»¥è®¾ç½®é¢œè‰²æˆ–Sprite
```

#### B. è¡€æ¡
```
åœ¨LevelHealthPanelä¸‹:
å³é”® > UI > Slider
åç§°: HealthSlider

Slider è®¾ç½®:
â”œâ”€â”€ Min Value: 0
â”œâ”€â”€ Max Value: 10
â”œâ”€â”€ Whole Numbers: âœ“ (å‹¾é€‰)
â”œâ”€â”€ Value: 10
```

è°ƒæ•´Sliderå†…éƒ¨å…ƒç´ :
```
HealthSlider
â”œâ”€â”€ Background (ç°è‰²)
â”œâ”€â”€ Fill Area
â”‚   â””â”€â”€ Fill (Image)
â”‚       â””â”€â”€ Color: ç»¿è‰² (#00FF00)
â””â”€â”€ Handle Slide Area (å¯ä»¥åˆ é™¤ï¼Œä¸éœ€è¦æ‹–åŠ¨)
```

#### C. æ–‡æœ¬æ˜¾ç¤º
```
åœ¨LevelHealthPanelä¸‹:
å³é”® > UI > Text
åç§°: HealthText

Text ç»„ä»¶:
â”œâ”€â”€ Text: "10/10"
â”œâ”€â”€ Font Size: 24
â”œâ”€â”€ Alignment: Center
â”œâ”€â”€ Color: ç™½è‰²
```

#### D. å¤±è´¥é¢æ¿
```
åœ¨GameHUDä¸‹:
å³é”® > UI > Panel
åç§°: GameOverPanel

è®¾ç½®:
â”œâ”€â”€ Anchor: å±…ä¸­æ‹‰ä¼¸ (stretch-stretch)
â”œâ”€â”€ Color: é»‘è‰²åŠé€æ˜ (A=180)

åœ¨GameOverPanelä¸‹æ·»åŠ æ–‡æœ¬:
å³é”® > UI > Text
åç§°: GameOverText
â”œâ”€â”€ Text: "æ¸¸æˆå¤±è´¥ï¼"
â”œâ”€â”€ Font Size: 48
â”œâ”€â”€ Color: çº¢è‰²
â”œâ”€â”€ Alignment: Center
```

### 5.4 æ·»åŠ UIè„šæœ¬

```
é€‰ä¸­ LevelHealthPanel
Inspector > Add Component
æœç´¢: "LevelHealthUI"
æ·»åŠ è„šæœ¬

è¿æ¥å¼•ç”¨:
â”œâ”€â”€ Health Slider: æ‹–å…¥ HealthSlider
â”œâ”€â”€ Fill Image: æ‹–å…¥ HealthSlider/Fill Area/Fill
â”œâ”€â”€ Health Text: æ‹–å…¥ HealthText
â”œâ”€â”€ Game Over Panel: æ‹–å…¥ GameOverPanel
```

### 5.5 è®¾ç½®é¢œè‰²é˜ˆå€¼

```
LevelHealthUI ç»„ä»¶:
ã€é¢œè‰²è®¾ç½®ã€‘
â”œâ”€â”€ Healthy Color: ç»¿è‰² (#00FF00)
â”œâ”€â”€ Warning Color: é»„è‰² (#FFFF00)
â”œâ”€â”€ Critical Color: çº¢è‰² (#FF0000)

ã€é˜ˆå€¼ã€‘
â”œâ”€â”€ Warning Threshold: 0.5    (50%ä»¥ä¸‹å˜é»„)
â””â”€â”€ Critical Threshold: 0.3   (30%ä»¥ä¸‹å˜çº¢)
```

### 5.6 éšè—å¤±è´¥é¢æ¿

```
é€‰ä¸­ GameOverPanel
Inspector > å–æ¶ˆå‹¾é€‰å·¦ä¸Šè§’çš„å¤é€‰æ¡†ï¼ˆç¦ç”¨ï¼‰
```

**æµ‹è¯•**:
- è¿è¡Œæ¸¸æˆ
- åœ¨Consoleæ‰§è¡Œ: `LevelHealthSystem.Instance.TakeDamage(3)`
- è§‚å¯Ÿï¼š
  - [ ] UIæ˜¾ç¤º "7/10"
  - [ ] è¡€æ¡å‡å°‘
  - [ ] è¡€é‡ä½äº50%æ—¶å˜é»„
  - [ ] è¡€é‡ä¸º0æ—¶æ˜¾ç¤ºå¤±è´¥é¢æ¿

---

## ğŸ¨ æ­¥éª¤6ï¼šè°ƒæ•´Layerå’ŒCollision Matrix

### 6.1 è®¾ç½®Collision Matrix

```
Edit > Project Settings > Physics 2D

åœ¨ Layer Collision Matrix ä¸­:
- Enemy ä¸ Tower: âœ“ (å‹¾é€‰ï¼Œå¯ä»¥ç¢°æ’)
- Enemy ä¸ Kitchen: âœ“ (å‹¾é€‰ï¼Œè§¦å‘æ£€æµ‹)
- Tower ä¸ Player: âœ“ (å‹¾é€‰)
- Enemy ä¸ Enemy: âœ— (ä¸å‹¾é€‰ï¼Œæ€ªç‰©ä¹‹é—´ä¸ç¢°æ’)
```

---

## ğŸ§ª å®Œæ•´æµ‹è¯•æµç¨‹

### æµ‹è¯•1ï¼šå…³å¡ç”Ÿå‘½å€¼ç³»ç»Ÿ
```
1. è¿è¡Œæ¸¸æˆ
2. åœ¨Consoleè¾“å…¥: 
   LevelHealthSystem.Instance.TakeDamage(1)
3. è§‚å¯ŸUIæ˜¯å¦æ˜¾ç¤º "9/10"
4. è¿ç»­æ‰£è¡€åˆ°0
5. è§‚å¯Ÿæ˜¯å¦æ˜¾ç¤ºå¤±è´¥é¢æ¿
```

### æµ‹è¯•2ï¼šæ€ªç‰©è¿›å…¥å¨æˆ¿
```
1. è¿è¡Œæ¸¸æˆ
2. ç­‰å¾…æ€ªç‰©ç”Ÿæˆ
3. å¦‚æœæ€ªç‰©æ²¡æœ‰è‡ªåŠ¨å¯»è·¯åˆ°å¨æˆ¿ï¼Œæ‰‹åŠ¨æ‹–åŠ¨ä¸€ä¸ª
4. è§‚å¯Ÿï¼š
   - æ€ªç‰©è¿›å…¥å¨æˆ¿åŒºåŸŸåæ­»äº¡
   - å…³å¡ç”Ÿå‘½å€¼å‡å°‘
   - æ²¡æœ‰æ‰è½é£Ÿæ
```

### æµ‹è¯•3ï¼šé˜²å¾¡å¡”æ”»å‡»
```
1. ç¡®ä¿é˜²å¾¡å¡”èƒ½é‡å……è¶³
2. è®©æ€ªç‰©è¿›å…¥é˜²å¾¡å¡”æ”»å‡»èŒƒå›´ï¼ˆ5å•ä½ï¼‰
3. è§‚å¯Ÿï¼š
   - Sceneè§†å›¾ä¸­å‡ºç°é»„è‰²è¿çº¿
   - æ€ªç‰©è¡€é‡å‡å°‘
   - Consoleè¾“å‡ºæ”»å‡»æ—¥å¿—
4. è®©é˜²å¾¡å¡”èƒ½é‡è€—å°½å®•æœº
5. è§‚å¯Ÿå®•æœºåæ˜¯å¦åœæ­¢æ”»å‡»
```

### æµ‹è¯•4ï¼šæ€ªç‰©æ”»å‡»é˜²å¾¡å¡”
```
1. è®©æ€ªç‰©èµ°åˆ°é˜²å¾¡å¡”æ—è¾¹ï¼ˆ1.5å•ä½å†…ï¼‰
2. è§‚å¯Ÿï¼š
   - Sceneè§†å›¾ä¸­æ€ªç‰©æœ‰æ©™è‰²æ”»å‡»èŒƒå›´
   - é˜²å¾¡å¡”èƒ½é‡æ§½ä¸‹é™
   - Consoleè¾“å‡ºæ€ªç‰©æ”»å‡»æ—¥å¿—
3. ç­‰å¾…é˜²å¾¡å¡”èƒ½é‡è€—å°½
4. è§‚å¯Ÿï¼š
   - é˜²å¾¡å¡”è¿›å…¥å®•æœºçŠ¶æ€
   - æ€ªç‰©å¯ä»¥ç©¿è¿‡é˜²å¾¡å¡”
```

### æµ‹è¯•5ï¼šå®Œæ•´æ¸¸æˆå¾ªç¯
```
1. å¼€å§‹æ¸¸æˆ
2. æ€ªç‰©ç”Ÿæˆå¹¶å‰è¿›
3. é˜²å¾¡å¡”è‡ªåŠ¨æ”»å‡»æ€ªç‰©
4. æ€ªç‰©æ”»å‡»é˜²å¾¡å¡”æ¶ˆè€—èƒ½é‡
5. ç©å®¶æ‹¾å–æ‰è½é£Ÿæ
6. çƒ¹é¥ªèœå“
7. å–‚é£Ÿé˜²å¾¡å¡”æ¢å¤èƒ½é‡
8. å¦‚æœæ€ªç‰©çªç ´åˆ°å¨æˆ¿ï¼Œå…³å¡ç”Ÿå‘½å€¼å‡å°‘
9. ç”Ÿå‘½å€¼ä¸º0 = æ¸¸æˆå¤±è´¥
10. å®Œæˆå¤§è®¢å• = æ¸¸æˆèƒœåˆ©
```

---

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1: é˜²å¾¡å¡”ä¸æ”»å‡»æ€ªç‰©

**æ£€æŸ¥æ¸…å•**:
- [ ] æ€ªç‰©çš„Layeræ˜¯å¦è®¾ç½®ä¸º "Enemy"
- [ ] TowerControllerçš„Enemy Layeræ˜¯å¦é€‰æ‹©äº† "Enemy"
- [ ] æ€ªç‰©æ˜¯å¦åœ¨æ”»å‡»èŒƒå›´å†…ï¼ˆçº¢è‰²åœ†åœˆï¼‰
- [ ] é˜²å¾¡å¡”æ˜¯å¦å®•æœºï¼ˆèƒ½é‡ä¸º0ï¼‰
- [ ] æ€ªç‰©çš„Teamæ˜¯å¦ä¸º TeamB

**è§£å†³æ–¹æ¡ˆ**:
```
1. é€‰ä¸­æ€ªç‰©Prefab
2. ç¡®è®¤ Layer = Enemy
3. ç¡®è®¤ CharacterCtrlBase.CharacterTeam = TeamB
4. é€‰ä¸­é˜²å¾¡å¡”
5. ç¡®è®¤ TowerController.enemyLayer åŒ…å« Enemy å±‚
```

### é—®é¢˜2: æ€ªç‰©ä¸æ”»å‡»é˜²å¾¡å¡”

**æ£€æŸ¥æ¸…å•**:
- [ ] é˜²å¾¡å¡”çš„Layeræ˜¯å¦è®¾ç½®ä¸º "Tower"
- [ ] MonsterCombatBehaviorçš„Tower Layeræ˜¯å¦é€‰æ‹©äº† "Tower"
- [ ] æ€ªç‰©æ˜¯å¦æœ‰ MonsterCombatBehavior ç»„ä»¶
- [ ] æ€ªç‰©æ˜¯å¦åœ¨æ”»å‡»èŒƒå›´å†…ï¼ˆ1.5å•ä½ï¼‰

**è§£å†³æ–¹æ¡ˆ**:
```
1. é€‰ä¸­é˜²å¾¡å¡”
2. ç¡®è®¤ Layer = Tower
3. é€‰ä¸­æ€ªç‰©Prefab
4. ç¡®è®¤æœ‰ MonsterCombatBehavior ç»„ä»¶
5. ç¡®è®¤ MonsterCombatBehavior.towerLayer åŒ…å« Tower å±‚
```

### é—®é¢˜3: æ€ªç‰©è¿›å…¥å¨æˆ¿ä¸æ‰£è¡€

**æ£€æŸ¥æ¸…å•**:
- [ ] KitchenZoneçš„Collideræ˜¯å¦è®¾ä¸ºTrigger
- [ ] æ€ªç‰©æ˜¯å¦æœ‰Collider2Dç»„ä»¶
- [ ] KitchenZoneæ˜¯å¦æœ‰ KitchenZoneTrigger è„šæœ¬
- [ ] LevelHealthSystemæ˜¯å¦åœ¨åœºæ™¯ä¸­

**è§£å†³æ–¹æ¡ˆ**:
```
1. é€‰ä¸­ KitchenZone
2. ç¡®è®¤ Box Collider 2D > Is Trigger = âœ“
3. ç¡®è®¤æœ‰ KitchenZoneTrigger ç»„ä»¶
4. é€‰ä¸­æ€ªç‰©
5. ç¡®è®¤æœ‰ Collider2Dï¼ˆä¸æ˜¯Triggerï¼‰
6. ç¡®è®¤ CharacterTeam = TeamB
```

### é—®é¢˜4: UIä¸æ˜¾ç¤º

**æ£€æŸ¥æ¸…å•**:
- [ ] Canvasçš„Render Modeæ˜¯å¦æ­£ç¡®
- [ ] LevelHealthUIçš„å¼•ç”¨æ˜¯å¦è¿æ¥
- [ ] GameOverPanelåˆå§‹æ˜¯å¦ç¦ç”¨
- [ ] EventSystemæ˜¯å¦åœ¨åœºæ™¯ä¸­

**è§£å†³æ–¹æ¡ˆ**:
```
1. é€‰ä¸­ Canvas
2. ç¡®è®¤ Render Mode = Screen Space - Overlay
3. é€‰ä¸­ LevelHealthPanel
4. ç¡®è®¤ LevelHealthUI çš„æ‰€æœ‰å¼•ç”¨éƒ½å·²è¿æ¥
5. é€‰ä¸­ GameOverPanel
6. ç¡®è®¤åˆå§‹çŠ¶æ€ä¸ºç¦ç”¨ï¼ˆå·¦ä¸Šè§’ä¸å‹¾é€‰ï¼‰
```

### é—®é¢˜5: é˜²å¾¡å¡”å®•æœºåæ€ªç‰©è¿˜æ˜¯å¡ä½

**æ£€æŸ¥æ¸…å•**:
- [ ] é˜²å¾¡å¡”æ˜¯å¦æœ‰Collider2D
- [ ] TowerControlleræ˜¯å¦æ­£ç¡®å¤„ç†å®•æœºçŠ¶æ€

**è§£å†³æ–¹æ¡ˆ**:
```
1. é€‰ä¸­é˜²å¾¡å¡”
2. ç¡®è®¤æœ‰ Collider2D ç»„ä»¶
3. è¿è¡Œæ¸¸æˆï¼Œè®©é˜²å¾¡å¡”å®•æœº
4. åœ¨Inspectorä¸­è§‚å¯Ÿ Collider2D.enabled æ˜¯å¦å˜ä¸º false
5. å¦‚æœæ²¡æœ‰å˜åŒ–ï¼Œæ£€æŸ¥ TowerController.UpdateBlockingState æ–¹æ³•
```

---

## ğŸ“Š è°ƒè¯•æŠ€å·§

### 1. ä½¿ç”¨Gizmoså¯è§†åŒ–

```
Sceneè§†å›¾å³ä¸Šè§’ > Gizmos æŒ‰é’® > ç¡®ä¿å¼€å¯

ä½ åº”è¯¥çœ‹åˆ°ï¼š
- çº¢è‰²åœ†åœˆï¼šé˜²å¾¡å¡”æ”»å‡»èŒƒå›´
- é»„è‰²çº¿æ¡ï¼šé˜²å¾¡å¡”æ”»å‡»ç›®æ ‡è¿çº¿
- æ©™è‰²åœ†åœˆï¼šæ€ªç‰©æ”»å‡»èŒƒå›´
- çº¢è‰²åŒºåŸŸï¼šå¨æˆ¿åŒºåŸŸ
```

### 2. ä½¿ç”¨Consoleæ—¥å¿—

æ‰€æœ‰ç³»ç»Ÿéƒ½ä¼šè¾“å‡ºè¯¦ç»†æ—¥å¿—ï¼š
```
"Tower attacked MeatMonster for 10 damage"
"Monster MeatMonster attacked tower for 10 energy damage"
"Monster MeatMonster entered kitchen zone!"
"Level took 1 damage. Health: 10 -> 9"
"Game Over! All health depleted."
```

### 3. ä½¿ç”¨Inspectorå®æ—¶æŸ¥çœ‹

è¿è¡Œæ¸¸æˆæ—¶ï¼š
```
é€‰ä¸­é˜²å¾¡å¡” > è§‚å¯Ÿï¼š
- TowerEnergySystem.CurrentEnergy
- TowerEnergySystem.CurrentState
- TowerController.currentTarget

é€‰ä¸­ LevelHealthSystem > è§‚å¯Ÿï¼š
- CurrentHealth
```

### 4. æ‰‹åŠ¨è§¦å‘æµ‹è¯•

åœ¨è¿è¡Œæ—¶çš„Consoleè¾“å…¥ï¼š
```csharp
// æ‰£é™¤å…³å¡ç”Ÿå‘½å€¼
LevelHealthSystem.Instance.TakeDamage(1);

// é‡ç½®ç”Ÿå‘½å€¼
LevelHealthSystem.Instance.ResetHealth();

// ç»™é˜²å¾¡å¡”å–‚é£Ÿï¼ˆéœ€è¦å…ˆåˆ›å»ºRecipeDataï¼‰
// towerController.Feed(recipeData);
```

---

## ğŸ¯ ä¼˜åŒ–å»ºè®®

### æ€§èƒ½ä¼˜åŒ–

1. **è°ƒæ•´æ”»å‡»æ£€æµ‹é¢‘ç‡**
```
å¦‚æœæ€ªç‰©å¾ˆå¤šï¼Œå¯ä»¥é™ä½æ”»å‡»é¢‘ç‡ï¼š
TowerController.attackInterval = 1.5f  // ä»1ç§’æ”¹ä¸º1.5ç§’
MonsterCombatBehavior.attackInterval = 3f  // ä»2ç§’æ”¹ä¸º3ç§’
```

2. **ä½¿ç”¨å¯¹è±¡æ± **
```
å¦‚æœæ€ªç‰©å¾ˆå¤šï¼Œè€ƒè™‘ä½¿ç”¨å¯¹è±¡æ± å¤ç”¨æ€ªç‰©GameObject
```

### å¹³è¡¡æ€§è°ƒæ•´

1. **è°ƒæ•´ä¼¤å®³å€¼**
```
TowerController.baseAttack = 15  // å¢åŠ é˜²å¾¡å¡”æ”»å‡»åŠ›
MonsterCombatBehavior.energyDamage = 5  // å‡å°‘æ€ªç‰©èƒ½é‡ä¼¤å®³
```

2. **è°ƒæ•´èƒ½é‡è¡°å‡**
```
TowerEnergySystem.normalDecayRate = 3  // ä»5æ”¹ä¸º3ï¼Œè¡°å‡å˜æ…¢
```

3. **è°ƒæ•´å…³å¡ç”Ÿå‘½å€¼**
```
LevelHealthSystem.maxHealth = 15  // ä»10æ”¹ä¸º15ï¼Œæ›´å®¹æ˜“
```

---

## ğŸ“ é…ç½®æ¸…å•

å®Œæˆæ‰€æœ‰é…ç½®åï¼Œæ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š

### Managers
- [ ] _LevelManagers/LevelHealthSystem å·²åˆ›å»ºå¹¶é…ç½®

### åœºæ™¯å¯¹è±¡
- [ ] KitchenZone å·²åˆ›å»ºï¼Œæœ‰è§¦å‘å™¨å’Œè„šæœ¬
- [ ] æ‰€æœ‰é˜²å¾¡å¡” Layer = Tower
- [ ] æ‰€æœ‰æ€ªç‰© Layer = Enemy

### é˜²å¾¡å¡”
- [ ] TowerController æ”»å‡»å‚æ•°å·²é…ç½®
- [ ] Enemy Layer å·²é€‰æ‹©
- [ ] æ”»å‡»èŒƒå›´å¯è§

### æ€ªç‰©
- [ ] æ‰€æœ‰æ€ªç‰©Prefabæ·»åŠ äº† MonsterCombatBehavior
- [ ] Tower Layer å·²é€‰æ‹©
- [ ] æ”»å‡»èŒƒå›´å¯è§

### UI
- [ ] LevelHealthPanel å·²åˆ›å»º
- [ ] HealthSlider å·²é…ç½®
- [ ] LevelHealthUI è„šæœ¬å·²æ·»åŠ å¹¶è¿æ¥å¼•ç”¨
- [ ] GameOverPanel åˆå§‹ç¦ç”¨

### Physics
- [ ] Layer 8: Enemy
- [ ] Layer 9: Tower
- [ ] Layer 10: Kitchen
- [ ] Collision Matrix å·²è®¾ç½®

---

## ğŸ‰ å®Œæˆï¼

å¦‚æœæ‰€æœ‰é…ç½®éƒ½æ­£ç¡®ï¼Œä½ ç°åœ¨åº”è¯¥æœ‰ä¸€ä¸ªå®Œæ•´å¯ç©çš„æ¸¸æˆæ ¸å¿ƒå¾ªç¯äº†ï¼

**æŒ‰ä¸‹PlayæŒ‰é’®ï¼Œå¼€å§‹æµ‹è¯•å§ï¼** ğŸš€

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹ "å¸¸è§é—®é¢˜æ’æŸ¥" éƒ¨åˆ†
2. æ£€æŸ¥Consoleçš„é”™è¯¯æ—¥å¿—
3. ç¡®è®¤æ‰€æœ‰å¼•ç”¨éƒ½å·²æ­£ç¡®è¿æ¥
4. ä½¿ç”¨Gizmoså¯è§†åŒ–è°ƒè¯•

---

*æœ€åæ›´æ–°: 2025å¹´10æœˆ18æ—¥*


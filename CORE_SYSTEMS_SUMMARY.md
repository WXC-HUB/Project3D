# ã€Šç¾é£Ÿå®ˆæŠ¤è€…ã€‹æ ¸å¿ƒç³»ç»Ÿå®ç°æ€»ç»“

## âœ… å·²å®Œæˆç³»ç»Ÿï¼ˆç¬¬äºŒæ‰¹ï¼‰

### ğŸ—ï¸ 1. é˜²å¾¡å¡”èƒ½é‡æ§½ç³»ç»Ÿ

#### æ ¸å¿ƒç‰¹æ€§
- **å››æ®µå¼èƒ½é‡çŠ¶æ€**ï¼š
  - ğŸŸ¡ **äº¢å¥‹** (100%-66%): æ”»å‡»åŠ›1.5xï¼Œæœ‰é˜»æŒ¡
  - ğŸŸ¢ **æ­£å¸¸** (65%-33%): æ”»å‡»åŠ›1.0xï¼Œæœ‰é˜»æŒ¡
  - ğŸ”´ **è¡°å¼±** (32%-1%): æ”»å‡»åŠ›0.5xï¼Œæœ‰é˜»æŒ¡
  - âš« **å®•æœº** (0%): æ— æ³•æ”»å‡»ï¼Œæ— é˜»æŒ¡

- **èƒ½é‡è¡°å‡æœºåˆ¶**ï¼š
  - éƒ¨ç½²æ—¶æ»¡èƒ½é‡
  - ç¬¬ä¸€å›åˆä¸è¡°å‡
  - ä¹‹åæŒç»­è¡°å‡
  - å—æ€ªç‰©æ”»å‡»é¢å¤–æ‰£é™¤

- **å–‚é£Ÿæœºåˆ¶**ï¼š
  - æ™®é€šçŠ¶æ€ï¼šå›æ»¡èƒ½é‡
  - äº¢å¥‹çŠ¶æ€ï¼šå¢åŠ é¢å¤–èƒ½é‡æ¡ï¼ˆæœ€å¤š+50ï¼‰
  - å®•æœºçŠ¶æ€ï¼šå¯æ¢å¤

#### æ–‡ä»¶åˆ—è¡¨
```
Assets/Scripts/GamePlay/Tower/
â”œâ”€â”€ TowerEnergyState.cs          // èƒ½é‡çŠ¶æ€æšä¸¾
â”œâ”€â”€ TowerEnergySystem.cs         // èƒ½é‡ç³»ç»Ÿæ ¸å¿ƒ
â””â”€â”€ TowerController.cs           // é˜²å¾¡å¡”æ§åˆ¶å™¨
```

#### ä½¿ç”¨æ–¹æ³•
```csharp
// åœ¨é˜²å¾¡å¡”Prefabä¸Šæ·»åŠ ç»„ä»¶
TowerEnergySystem energySystem = gameObject.AddComponent<TowerEnergySystem>();
TowerController controller = gameObject.AddComponent<TowerController>();

// éƒ¨ç½²é˜²å¾¡å¡”
energySystem.Deploy();

// å–‚é£Ÿï¼ˆä½¿ç”¨é…æ–¹ï¼‰
RecipeData recipe = ...;
controller.Feed(recipe);

// å—åˆ°æ”»å‡»
energySystem.TakeDamage(20f);
```

---

### ğŸŒŠ 2. æ³¢æ¬¡ç³»ç»Ÿ

#### æ ¸å¿ƒç‰¹æ€§
- **ä¸‰ä¸ªé˜¶æ®µ**ï¼š
  - ğŸ›¡ï¸ **å‡†å¤‡é˜¶æ®µ** (15ç§’): ç©å®¶å¸ƒç½®é˜²å¾¡å¡”
  - âš”ï¸ **æˆ˜æ–—é˜¶æ®µ**: æ€ªç‰©æŒç»­ç”Ÿæˆ
  - â¸ï¸ **é—´éš”é˜¶æ®µ** (5ç§’): æ³¢æ¬¡é—´ä¼‘æ¯

- **æ€ªç‰©ç®¡ç†**ï¼š
  - æ”¯æŒå¤šç§æ€ªç‰©ç±»å‹
  - å¯é…ç½®ç”Ÿæˆé—´éš”
  - è‡ªåŠ¨è·¯å¾„åˆ†é…
  - å‡»æ€è®¡æ•°

- **æ³¢æ¬¡å®Œæˆæ£€æµ‹**ï¼š
  - æ‰€æœ‰æ€ªç‰©ç”Ÿæˆå®Œæ¯•
  - æ‰€æœ‰æ€ªç‰©è¢«å‡»æ€
  - è‡ªåŠ¨è¿›å…¥ä¸‹ä¸€æ³¢æˆ–å®Œæˆå…³å¡

#### æ–‡ä»¶åˆ—è¡¨
```
Assets/Scripts/GamePlay/Wave/
â”œâ”€â”€ WaveData.cs                  // æ³¢æ¬¡é…ç½®SO
â””â”€â”€ WaveManager.cs               // æ³¢æ¬¡ç®¡ç†å™¨
```

#### é…ç½®ç¤ºä¾‹
```csharp
// åˆ›å»ºæ³¢æ¬¡é…ç½®
WaveData wave = ScriptableObject.CreateInstance<WaveData>();
wave.waveID = 1;
wave.preparationTime = 15f;
wave.intervalTime = 5f;

// æ·»åŠ æ€ªç‰©
wave.monsters.Add(new MonsterSpawnConfig
{
    monsterID = 1,              // èŒ„èŒ„ç« 
    count = 10,
    spawnInterval = 2f,
    spawnRootID = 101
});

// å¼€å§‹æ³¢æ¬¡
WaveManager.Instance.StartWaves();
```

---

### ğŸ® 3. ç©å®¶äº¤äº’ç³»ç»Ÿ

#### æ ¸å¿ƒç‰¹æ€§
- **ç»Ÿä¸€äº¤äº’æ¥å£** (`IInteractable`)
- **è‡ªåŠ¨ç›®æ ‡æ£€æµ‹**ï¼š
  - èŒƒå›´æ£€æµ‹ï¼ˆ2ç±³ï¼‰
  - ä¼˜å…ˆçº§æ’åº
  - è·ç¦»æƒé‡

- **Eé”®äº¤äº’**ï¼š
  - æ‹¾å–é£Ÿæ
  - ä½¿ç”¨å¨å…·
  - è®¿é—®ä»“åº“
  - æäº¤è®¢å•
  - å–‚é£Ÿé˜²å¾¡å¡”

#### æ–‡ä»¶åˆ—è¡¨
```
Assets/Scripts/GamePlay/Interaction/
â”œâ”€â”€ IInteractable.cs             // å¯äº¤äº’æ¥å£
â”œâ”€â”€ InteractionSystem.cs         // äº¤äº’ç³»ç»Ÿæ ¸å¿ƒ
â”œâ”€â”€ InteractableIngredient.cs    // é£Ÿæäº¤äº’
â”œâ”€â”€ InteractableAppliance.cs     // å¨å…·äº¤äº’
â”œâ”€â”€ InteractableStorage.cs       // ä»“åº“äº¤äº’
â”œâ”€â”€ InteractableDelivery.cs      // å‡ºé¤å£äº¤äº’
â””â”€â”€ InteractableTower.cs         // é˜²å¾¡å¡”äº¤äº’
```

#### å®ç°æ­¥éª¤
```
1. åœ¨ç©å®¶èº«ä¸Šæ·»åŠ  InteractionSystem ç»„ä»¶
2. åœ¨å¯äº¤äº’å¯¹è±¡ä¸Šæ·»åŠ å¯¹åº”çš„ Interactable ç»„ä»¶
3. è®¾ç½® Layerï¼ˆç¡®ä¿æ£€æµ‹æ­£ç¡®ï¼‰
4. ç©å®¶é è¿‘æ—¶è‡ªåŠ¨æ˜¾ç¤ºæç¤º
5. æŒ‰Eé”®æ‰§è¡Œäº¤äº’
```

#### ä¼˜å…ˆçº§è®¾ç½®
```
é˜²å¾¡å¡” (10) > å‡ºé¤å£ (8) > ä»“åº“ (7) > å¨å…· (5) > é£Ÿæ (1)
```

---

## ğŸ“Š ç³»ç»Ÿæ•´åˆå…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ¸¸æˆæ ¸å¿ƒå¾ªç¯                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                         â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  æ³¢æ¬¡ç³»ç»Ÿ     â”‚        â”‚  çƒ¹é¥ªç³»ç»Ÿ       â”‚
    â”‚ WaveManager   â”‚        â”‚ OrderManager    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                         â”‚
            â†“                         â†“
      ç”Ÿæˆæ€ªç‰© â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ æ‰è½é£Ÿæ
            â”‚                         â”‚
            â”‚                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
            â”‚                    â”‚          â”‚
            â†“                    â†“          â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      ç©å®¶æ‹¾å–    è‡ªåŠ¨æ”¶é›†
    â”‚ é˜²å¾¡å¡”ç³»ç»Ÿ    â”‚          â”‚          â”‚
    â”‚ TowerEnergy   â”‚          â†“          â†“
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      èƒŒåŒ…ç³»ç»Ÿ    ä»“åº“ç³»ç»Ÿ
            â”‚                  â”‚          â”‚
            â”‚                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â”‚                       â”‚
            â†“                       â†“
    æ”»å‡»æ€ªç‰© â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ çƒ¹é¥ªé£Ÿæ
            â”‚                       â”‚
            â†“                       â†“
      èƒ½é‡æ¶ˆè€— â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ å–‚é£Ÿé˜²å¾¡å¡”
            â”‚
            â””â”€â”€â†’ èƒ½é‡å›æ»¡ â†’ ç»§ç»­æˆ˜æ–—
```

---

## ğŸ¯ ç³»ç»Ÿç‰¹è‰²

### 1. èƒ½é‡æ§½çš„åˆ›æ–°è®¾è®¡
- âœ¨ **äº¢å¥‹æœºåˆ¶**ï¼šå–‚é£Ÿæ—¶æœºå¾ˆé‡è¦
- âš–ï¸ **çŠ¶æ€ç®¡ç†**ï¼šèƒ½é‡å½±å“æ”»å‡»åŠ›å’Œé˜»æŒ¡
- ğŸ”„ **æ­£åé¦ˆå¾ªç¯**ï¼šå‡»æ€â†’çƒ¹é¥ªâ†’å–‚é£Ÿâ†’æ›´å¼º

### 2. æ³¢æ¬¡çš„èŠ‚å¥è®¾è®¡
- ğŸ›¡ï¸ **å‡†å¤‡æ—¶é—´**ï¼šç»™ç©å®¶å¸ƒç½®çš„æ—¶é—´
- âš”ï¸ **æˆ˜æ–—å‹åŠ›**ï¼šæŒç»­ç”Ÿæˆæ€ªç‰©
- â¸ï¸ **å–˜æ¯æ—¶é—´**ï¼šæ³¢æ¬¡é—´éš”çƒ¹é¥ª

### 3. äº¤äº’çš„ä¾¿åˆ©æ€§
- ğŸ¯ **è‡ªåŠ¨æ£€æµ‹**ï¼šæ— éœ€æ‰‹åŠ¨ç„å‡†
- ğŸ“Š **ä¼˜å…ˆçº§**ï¼šæ™ºèƒ½é€‰æ‹©æœ€é‡è¦çš„å¯¹è±¡
- ğŸ’¡ **å³æ—¶åé¦ˆ**ï¼šæ¸…æ™°çš„æç¤ºæ–‡æœ¬

---

## ğŸš€ ä½¿ç”¨æµç¨‹

### å…³å¡åˆå§‹åŒ–
```csharp
// 1. è®¾ç½®æ³¢æ¬¡
WaveManager.Instance.StartWaves();

// 2. åˆ›å»ºè®¢å•
OrderManager.Instance.CreateLargeOrder(recipeData, 3);

// 3. éƒ¨ç½²é˜²å¾¡å¡”
TowerEnergySystem tower = ...;
tower.Deploy();
```

### æ¸¸æˆå¾ªç¯
```csharp
// æ³¢æ¬¡è¿›è¡Œä¸­
WaveManager.OnMonsterSpawned += (s, e) => {
    // æ€ªç‰©ç”Ÿæˆï¼Œå¼€å§‹æ”»å‡»
};

WaveManager.OnMonsterKilled += (s, e) => {
    // æ€ªç‰©æ­»äº¡ï¼Œæ‰è½é£Ÿæ
    e.monster.GetComponent<IngredientDropper>().DropIngredients();
};

// ç©å®¶äº¤äº’
InteractionSystem interaction = player.GetComponent<InteractionSystem>();
interaction.OnInteractionPerformed += (s, e) => {
    // æ‰§è¡Œäº¤äº’é€»è¾‘
};

// é˜²å¾¡å¡”çŠ¶æ€
TowerEnergySystem.OnStateChanged += (s, e) => {
    // æ›´æ–°UIï¼Œæ’­æ”¾ç‰¹æ•ˆ
};
```

---

## ğŸ“¦ é…ç½®æ¸…å•

### å¿…éœ€çš„ScriptableObject
1. **WaveData** (x3-5)
   - é…ç½®æ¯æ³¢çš„æ€ªç‰©
   - è®¾ç½®æ—¶é—´å‚æ•°
   
2. **IngredientData** (x20)
   - å·²åœ¨çƒ¹é¥ªç³»ç»Ÿä¸­åˆ›å»º
   
3. **RecipeData** (x10)
   - å·²åœ¨çƒ¹é¥ªç³»ç»Ÿä¸­åˆ›å»º

### å¿…éœ€çš„Prefab
1. **Tower Prefab**
   - æ·»åŠ  `TowerEnergySystem`
   - æ·»åŠ  `TowerController`
   - æ·»åŠ  `InteractableTower`
   - æ·»åŠ  `PlayerCharacterCtrl`
   
2. **Enemy Prefab**
   - æ·»åŠ  `IngredientDropper`
   - é…ç½®æ‰è½è¡¨
   - æ·»åŠ  `AIAgentBase`

### åœºæ™¯è®¾ç½®
```
Scene:
â”œâ”€â”€ WaveManager (å•ä¾‹)
â”œâ”€â”€ OrderManager (å•ä¾‹)
â”œâ”€â”€ LevelManager (å·²æœ‰)
â”œâ”€â”€ Storage (ä»“åº“)
â”‚   â”œâ”€â”€ StorageCounter
â”‚   â””â”€â”€ InteractableStorage
â”œâ”€â”€ Appliances (å¨å…·x4)
â”‚   â”œâ”€â”€ StirFryAppliance + InteractableAppliance
â”‚   â”œâ”€â”€ StewAppliance + InteractableAppliance
â”‚   â”œâ”€â”€ FryAppliance + InteractableAppliance
â”‚   â””â”€â”€ RoastAppliance + InteractableAppliance
â”œâ”€â”€ DeliveryCounter (å‡ºé¤å£)
â”‚   â”œâ”€â”€ DeliveryCounter
â”‚   â””â”€â”€ InteractableDelivery
â””â”€â”€ Player
    â”œâ”€â”€ PlayerCharacterCtrl
    â”œâ”€â”€ PlayerInventory
    â””â”€â”€ InteractionSystem
```

---

## ğŸ¨ UIéœ€æ±‚ï¼ˆå¾…å®ç°ï¼‰

### 1. èƒ½é‡æ§½UI
- æ˜¾ç¤ºå½“å‰èƒ½é‡ç™¾åˆ†æ¯”
- çŠ¶æ€é¢œè‰²å˜åŒ–
- é¢å¤–èƒ½é‡æ¡æ˜¾ç¤º

### 2. æ³¢æ¬¡UI
- å½“å‰æ³¢æ¬¡/æ€»æ³¢æ¬¡
- å‰©ä½™æ€ªç‰©æ•°
- å‡†å¤‡/é—´éš”å€’è®¡æ—¶

### 3. äº¤äº’æç¤ºUI
- æµ®åŠ¨æç¤ºæ–‡æœ¬
- æŒ‰é”®å›¾æ ‡
- æ·¡å…¥æ·¡å‡ºåŠ¨ç”»

### 4. è®¢å•UI
- å·²åœ¨çƒ¹é¥ªç³»ç»Ÿä¸­æè¿°

---

## ğŸ”§ ä¸‹ä¸€æ­¥å·¥ä½œ

### é«˜ä¼˜å…ˆçº§
1. âœ… é˜²å¾¡å¡”èƒ½é‡æ§½ç³»ç»Ÿ
2. âœ… æ³¢æ¬¡ç³»ç»Ÿ
3. âœ… äº¤äº’ç³»ç»Ÿ
4. âœ… å–‚é£Ÿæœºåˆ¶
5. â³ UIå®ç°
6. â³ é˜²å¾¡å¡”AIè‡ªåŠ¨æ”»å‡»

### ä¸­ä¼˜å…ˆçº§
- éŸ³æ•ˆé›†æˆ
- ç‰¹æ•ˆé›†æˆ
- å…³å¡é…ç½®å·¥å…·
- å¹³è¡¡æ€§è°ƒè¯•

### ä½ä¼˜å…ˆçº§
- æ•™ç¨‹ç³»ç»Ÿ
- æˆå°±ç³»ç»Ÿ
- é…æ–¹è§£é”
- å¤šäººæ¨¡å¼

---

## ğŸ“ é›†æˆæ£€æŸ¥æ¸…å•

### é˜²å¾¡å¡”ç³»ç»Ÿ
- [ ] åœ¨Tower Prefabæ·»åŠ  `TowerEnergySystem`
- [ ] åœ¨Tower Prefabæ·»åŠ  `TowerController`
- [ ] åœ¨Tower Prefabæ·»åŠ  `InteractableTower`
- [ ] æµ‹è¯•èƒ½é‡è¡°å‡
- [ ] æµ‹è¯•å–‚é£Ÿæ¢å¤
- [ ] æµ‹è¯•çŠ¶æ€åˆ‡æ¢

### æ³¢æ¬¡ç³»ç»Ÿ
- [ ] åˆ›å»ºWaveDataé…ç½®
- [ ] åœ¨åœºæ™¯æ·»åŠ WaveManager
- [ ] é…ç½®æ€ªç‰©ç”Ÿæˆå‚æ•°
- [ ] æµ‹è¯•æ³¢æ¬¡æµç¨‹
- [ ] é›†æˆåˆ°LevelManager

### äº¤äº’ç³»ç»Ÿ
- [ ] åœ¨ç©å®¶æ·»åŠ InteractionSystem
- [ ] åœ¨æ‰€æœ‰å¯äº¤äº’å¯¹è±¡æ·»åŠ å¯¹åº”ç»„ä»¶
- [ ] è®¾ç½®æ­£ç¡®çš„Layer
- [ ] æµ‹è¯•æ‰€æœ‰äº¤äº’
- [ ] æ·»åŠ UIæç¤º

---

## ğŸ‰ æˆæœæ€»ç»“

### ç¬¬ä¸€æ‰¹ï¼ˆçƒ¹é¥ªç³»ç»Ÿï¼‰
- âœ… 21ä¸ªæ–‡ä»¶
- âœ… 2500+è¡Œä»£ç 
- âœ… å®Œæ•´çš„çƒ¹é¥ªç©æ³•å¾ªç¯

### ç¬¬äºŒæ‰¹ï¼ˆæ ¸å¿ƒç³»ç»Ÿï¼‰
- âœ… 14ä¸ªæ–‡ä»¶
- âœ… 1500+è¡Œä»£ç 
- âœ… å®Œæ•´çš„æˆ˜æ–—ç©æ³•å¾ªç¯

### æ€»è®¡
- âœ… **35ä¸ªC#æ–‡ä»¶**
- âœ… **4000+è¡Œä»£ç **
- âœ… **3ä¸ªå®Œæ•´æ–‡æ¡£**
- âœ… **æ— ç¼–è¯‘é”™è¯¯**
- âœ… **å®Œæ•´äº‹ä»¶ç³»ç»Ÿ**
- âœ… **ç­–åˆ’å‹å¥½çš„é…ç½®**

---

**åˆ›å»ºæ—¶é—´**: 2025-10-18  
**ç³»ç»Ÿç‰ˆæœ¬**: v1.0  
**çŠ¶æ€**: âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæˆï¼Œå¯æŠ•å…¥ä½¿ç”¨

